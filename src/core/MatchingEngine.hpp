#pragma once

#include "Order.hpp"
#include "OrderBook.hpp"
#include "../concurrency/OrderBuffer.hpp"
#include "Trade.hpp"
#include <vector>

class MatchingEngine {
public:
    void run(OrderBuffer& buffer);
    void stop();
private:
    OrderBook orderBook_;

    // Processes an incoming order.
    // Returns a vector of trades generated by the matching.
    std::vector<Trade> processOrder(Order& order);

    // Flag for the running state of the engine
    std::atomic<bool> running_ = true;

};
